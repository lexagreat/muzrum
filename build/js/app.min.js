const maskOptions={mask:"+{7} (000) 000-00-00"};document.querySelectorAll("[data-phone]").length&&document.querySelectorAll("[data-phone]").forEach(e=>{IMask(e,maskOptions)});const body=document.body;function headerWork(){const e=document.querySelector(".header");if(!e)return;document.querySelector("main.main")||e.classList.add("transparent");let t=0,l=document.querySelector(".hero");document.addEventListener("scroll",()=>{if(window.innerWidth>992){const l=document.documentElement.scrollTop;if(l<=0)return;t<l?e.classList.add("scroll-down"):e.classList.remove("scroll-down"),t=l}if(l){let t=l.clientHeight;window.scrollY>t?e.classList.remove("transparent"):e.classList.add("transparent")}})}function homePage(){gsap.to(".home-hero__bg",{scrollTrigger:{trigger:".home-page",start:"top 90%",end:"top -50%",scrub:1.5},opacity:1}),function(){const e=document.querySelector(".home-hero .swiper");if(!e)return;const t=document.querySelectorAll(".home-hero__pagination > div"),l=document.querySelectorAll(".home-hero__slide"),s=document.querySelectorAll(".progress-circle");new Swiper(e,{slidesPerView:1,mousewheel:{enabled:!1,forceToAxis:!0},speed:2e3,autoplay:{enabled:!0,delay:5e3},effect:"creative",loop:!0,allowTouchMove:!1,simulateTouch:!1,creativeEffect:{prev:{shadow:!0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},on:{autoplayTimeLeft(e,t,l){s.forEach(e=>{e.style.strokeDashoffset=138*l})},slideNextTransitionEnd(e){let s=0;document.querySelector(".home-hero .swiper-slide.swiper-slide-active")&&(s=document.querySelector(".home-hero .swiper-slide.swiper-slide-active").getAttribute("data-swiper-slide-index")),t.forEach((e,t)=>{e.classList.remove("active")}),t[s].classList.add("active"),l.forEach((e,t)=>{e.classList.remove("active")}),l[s].classList.add("active")},init(){t[0].classList.add("active"),l[0].classList.add("active")}}});const o=document.querySelector(".home-hero__banner"),i=document.querySelector(".home-hero__clicker"),n=document.querySelector(".home-hero__form .icon-btn"),a=document.querySelector(".home-hero__thanks button");i.onclick=()=>{o.classList.add("step-2")},n.onclick=()=>{o.classList.remove("step-2"),o.classList.add("step-3")},a.onclick=()=>{o.classList.remove("step-2"),o.classList.remove("step-3"),o.classList.add("hidden")}}(),function(){const e=document.querySelectorAll(".home-catalog__item");if(!e.length)return;const t=document.querySelectorAll(".home-catalog .home-catalog__arrow");e.forEach((e,l)=>{let s=t[l];e.onmouseenter=e=>{s.classList.add("active")},e.onmousemove=e=>{s.style.left=e.offsetX+"px",s.style.top=e.offsetY+"px"},e.onmouseleave=e=>{s.classList.remove("active")}})}(),function(){const e=document.querySelectorAll(".home-recommend__links a");if(!e.length)return;const t=document.querySelectorAll(".home-recommend__images > div"),l=document.querySelectorAll(".home-recommend__video > div");e.forEach((s,o)=>{s.onmouseenter=()=>{t.forEach((e,t)=>{t>o&&e.classList.remove("active")}),l.forEach((e,t)=>{e.classList.remove("active")}),e.forEach((e,t)=>{e.classList.remove("active")}),t[o].classList.add("active"),l[o].classList.add("active"),s.classList.add("active")}})}(),productSlider(".home-first"),productSlider(".home-second"),function(){const e=document.querySelector(".home-brands .marquee");if(!e)return;const t=e.offsetHeight/2,l=e.offsetWidth/2;window.innerWidth>1024?gsap.to(e,{y:-t,duration:10,ease:"linear",repeat:-1}):gsap.to(e,{x:-l,duration:10,ease:"linear",repeat:-1})}(),reviews(),blogCards(),tabs('[name="social"]',".social-tab")}function catalogPage(){if(!document.querySelector(".catalog-filters"))return;new Select("#brandSelect",{placeholder:"Бренд",selectedId:[],multi:!0,data:[{value:"Casio",id:"Casio"},{value:"Becker",id:"Becker"},{value:"Korg",id:"Korg"},{value:"Kawai",id:"Kawai"},{value:"Rockdale",id:"Rockdale"},{value:"Kurzweil",id:"Kurzweil"},{value:"Roland",id:"Roland"},{value:"Nux",id:"Nux"},{value:"Ringway",id:"Ringway"},{value:"Orla",id:"Orla"},{value:"Yamaha",id:"Yamaha"},{value:"Mikado",id:"Mikado"},{value:"Artesia",id:"Artesia"},{value:"Antares",id:"Antares"},{value:"Medeli",id:"Medeli"},{value:"Tesler",id:"Tesler"}],onSelect(e,t){t.querySelectorAll(".selected").length&&t.classList.add("filled")}}),new Select("#sortSelect",{placeholder:"Сортировка",selectedId:"",multi:!1,data:[{id:"vibor-muzrum",value:"выбор музрум"},{id:"sort1",value:"популярные"},{id:"sort2",value:"по новизне"},{id:"sort3",value:"по возрастанию цены"},{id:"sort4",value:"по убыванию цены"}],onSelect(e,t){t.querySelectorAll(".selected").length&&t.classList.add("filled")}});(()=>{const e=document.querySelector("#colorSelect");e.onclick=t=>{let{type:l}=t.target.dataset;"clear"===l?(e.classList.remove("filled"),e.querySelectorAll("input").forEach(e=>e.checked=!1)):["input","back","header"].includes(l)?e.classList.contains("open")?e.classList.remove("open"):e.classList.add("open"):t.target.closest("label")&&(e.querySelectorAll("input:checked").length?(e.classList.add("filled"),e.querySelector(".select__title span.count").innerHTML=e.querySelectorAll("input:checked").length):e.classList.remove("filled"))}})(),(()=>{const e=document.querySelectorAll('[name="catalog-view"]'),t=document.querySelector(".catalog-products");e.forEach(e=>{e.addEventListener("change",e=>{1==e.target.value?t.classList.add("row"):t.classList.remove("row")})})})(),(()=>{makeRange("#priceSelect",4e5,1e3);const e=document.querySelector("#priceSelect");let t=e.querySelectorAll("input");e.onclick=l=>{let{type:s}=l.target.dataset;"clear"===s?(e.classList.remove("filled"),t[0].value=0,t[1].value=4e5,e.querySelector(".price-slider").style.left=0,e.querySelector(".price-slider").style.right=0):["input","back","header"].includes(s)&&(e.classList.contains("open")?e.classList.remove("open"):e.classList.add("open"))},t.forEach((l,s)=>{l.addEventListener("input",l=>{0==t[0].value&&4e5==t[1].value?(console.log(""),e.classList.remove("filled")):e.classList.add("filled")})})})(),makeRange("#priceRange1",4e5,1e3),(()=>{const e=document.querySelectorAll(".sale-banner img");let t=0;setInterval(()=>{e.forEach(e=>e.classList.remove("active")),e[t].classList.add("active"),t<e.length-1?t++:t=0},500)})(),accordion(".filters-modal__subheader",".filters-modal__collapse")}function productSlider(e){let t=document.querySelector(e+" .swiper");if(!t)return;new Swiper(t,{slidesPerView:"auto",spaceBetween:8,pagination:{el:e+" .swiper-pagination",type:"progressbar"},breakpoints:{1025:{slidesPerView:4,spaceBetween:12},569:{slidesPerView:2,spaceBetween:12}}})}function productCards(){const e=document.querySelectorAll(".product-card");e.length&&e.forEach((e,t)=>{let l=e.querySelector(".product-card__color input").name;tabs(`[name=${l}]`,`[data-tab-name=${l}]`)})}function reviews(){if(!document.querySelector(".reviews-section"))return;const e=document.querySelector(".reviews-section__navigation .prev"),t=document.querySelector(".reviews-section__navigation .next"),l=document.querySelector(".reviews-section__text");let s=0,o=[{text:"«Купила Korg c1 Air коричневый. Инструментом довольна, как и самим магазином с его внимательными консультантами. И да, не обманщики)) не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо! не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо!",author:{name:"Екатерина Незнанова",date:"29 сент 2024"},rating:4},{text:"Инструментом довольна, как и самим магазином с его внимательными консультантами. И да, не обманщики)) не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо! не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо!",author:{name:"Екатерина",date:"28 сент 2024"},rating:5},{text:"И да, не обманщики)) не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо! не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо!",author:{name:"иван иванов",date:"29 окт 2024"},rating:4},{text:"«Купила Korg c1 Air коричневый. Большое спасибо!",author:{name:"Василиса Незнанова",date:"29 сент 2023"},rating:3},{text:"И да, не обманщики)) не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо! не бойтесь заказывать доставку в регион, хоть это и потребует полной предоплаты. Большое спасибо!",author:{name:"Екатерина Незнанова",date:"29 сент 2022"},rating:5}];async function i(){var e;await async function(){let e=[...l.querySelectorAll("span"),...document.querySelectorAll(".reviews-section__info span"),...document.querySelectorAll(".reviews-section__rating li")],t=Array.from(e).map(e=>new Promise(t=>{gsap.to(e,{y:"-100%",duration:.3,ease:"linear",onComplete:t})}));return await Promise.all(t),!0}(),await(e=500,new Promise(t=>setTimeout(t,e)));let t=o[s];const[i,n]=document.querySelectorAll(".reviews-section__info p"),[a,c]=document.querySelectorAll(".reviews-section__pagination span"),r=document.querySelector(".reviews-section__rating");l.innerHTML=t.text.split(" ").map(e=>`<p><span>${e}</span></p>`).join(" "),i.innerHTML=`<span>${t.author.name}</span>`,n.innerHTML=`<span>${t.author.date}</span>`,a.innerHTML=s+1,c.innerHTML=o.length;let d=[];for(let e=0;e<t.rating;e++)d.push('<li>\n            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17"\n                                      fill="none">\n                                      <path\n                                         d="M8.52447 0.463525C8.67415 0.00287008 9.32585 0.00287008 9.47553 0.463525L11.1329 5.56434C11.1998 5.77035 11.3918 5.90983 11.6084 5.90983H16.9717C17.4561 5.90983 17.6575 6.52964 17.2656 6.81434L12.9266 9.96681C12.7514 10.0941 12.678 10.3198 12.745 10.5258L14.4023 15.6266C14.552 16.0873 14.0248 16.4704 13.6329 16.1857L9.29389 13.0332C9.11865 12.9059 8.88135 12.9059 8.70611 13.0332L4.3671 16.1857C3.97524 16.4704 3.448 16.0873 3.59768 15.6266L5.25503 10.5258C5.32197 10.3198 5.24864 10.0941 5.07339 9.96681L0.734384 6.81434C0.342527 6.52964 0.543915 5.90983 1.02828 5.90983H6.39159C6.6082 5.90983 6.80018 5.77035 6.86712 5.56434L8.52447 0.463525Z"\n                                         fill="#182126" />\n                                   </svg>\n           </li>');r.innerHTML=d.join(" ");l.scrollHeight;l.style.minHeight=l.clientHeight+"px",await async function(){let e=[...l.querySelectorAll("span"),...document.querySelectorAll(".reviews-section__info span"),...document.querySelectorAll(".reviews-section__rating li")],t=Array.from(e).map(e=>new Promise(t=>{gsap.from(e,{y:"100%",duration:.3,ease:"linear",onComplete:t})}));return await Promise.all(t),!0}()}e.onclick=()=>{0==s?s=o.length-1:s--,i()},t.onclick=()=>{s==o.length-1?s=0:s++,i()},i()}function blogCards(){const e=document.querySelectorAll(".blog-card");if(!e.length)return;const t=document.querySelectorAll(".blog-section .home-catalog__arrow");e.forEach((e,l)=>{let s=t[l];e.onmouseenter=e=>{s.classList.add("active")},e.onmousemove=e=>{s.style.left=e.offsetX+"px",s.style.top=e.offsetY+"px"},e.onmouseleave=e=>{s.classList.remove("active")}})}function footer(){const e=document.querySelector(".footer__form");if(!e)return;e.querySelector("button").onclick=()=>{e.classList.add("step-2")},window.innerWidth<=568&&accordion(".footer-spoiler__header",".footer__block .collapse")}function makeRange(e,t=1e4,l=500){const s=document.querySelector(e+" .slider-container .price-slider");if(!document.querySelector(e+" .slider-container .price-slider"))return;const o=document.querySelectorAll(e+" .range-input input");let i=l;console.log(s),console.log(o);const n=document.querySelectorAll(e+" .price-input input");for(let e=0;e<n.length;e++){n[e].addEventListener("input",e=>{let l=parseInt(n[0].value),a=parseInt(n[1].value),c=a-l;if(l<0&&(alert("minimum price cannot be less than 0"),n[0].value=0,l=0),a>t&&(alert("maximum price cannot be greater than "+t),n[1].value=t,a=t),l>a-i&&(n[0].value=a-i,l=a-i,l<0&&(n[0].value=0,l=0)),c>=i&&a<=o[1].max)if("min-input"===e.target.className){o[0].value=l;let e=o[0].max;s.style.left=l/e*100+"%"}else{o[1].value=a;let e=o[1].max;s.style.right=100-a/e*100+"%"}});for(let e=0;e<o.length;e++)o[e].addEventListener("input",e=>{let t=parseInt(o[0].value),l=parseInt(o[1].value);l-t<i?"min-range"===e.target.className?o[0].value=l-i:o[1].value=t+i:(n[0].value=t,n[1].value=l,s.style.left=t/o[0].max*100+"%",s.style.right=100-l/o[1].max*100+"%")})}}gsap.registerPlugin(ScrollTrigger),document.addEventListener("DOMContentLoaded",()=>{headerWork(),homePage(),productCards(),footer(),catalogPage()});class Select{constructor(e,t){this.$el=document.querySelector(e),this.options=t,this.selectedId=t.selectedId,this.render(),this.setup()}render(){this.$el.classList.add("select");const{placeholder:e,data:t,selectedId:l}=this.options;this.$el.innerHTML=this.getTemplate(t,e,l),e&&this.$el.querySelector('[data-type="input"]').classList.add("placeholder")}setup(){this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler),this.$value=this.$el.querySelector('[data-type="input"] span')}clickHandler(e){const{type:t}=e.target.dataset;if("clear"===t)return this.$el.classList.remove("filled"),this.$value.innerHTML=`\n            ${this.options.placeholder}\n            \n            `,this.$el.querySelectorAll(".select__item").forEach(e=>e.classList.remove("selected")),this.$el.querySelectorAll("input").forEach(e=>e.checked=!1),void(this.selectedId=[]);if("input"===t)this.toggle();else if("item"===t){const{id:t}=e.target.dataset;this.select(t)}else("back"===t||"header"===t||e.target.closest(".select__header"))&&this.toggle()}get current(){return this.options.multi?this.options.data.filter(e=>this.selectedId.some(t=>t===e.id)):this.options.data.find(e=>e.id===this.selectedId)}select(e){this.$el.querySelector('[data-type="input"]').classList.remove("placeholder"),this.options.multi?(this.selectedId.some(t=>t==e)?this.selectedId.splice(this.selectedId.findIndex(t=>t==e),1):this.selectedId.push(e),this.current.length?this.$value.innerHTML=`\n            ${this.options.placeholder}\n            <span>${this.current.length}</span>\n            `:(console.log("пусто"),this.$value.innerHTML=this.options.placeholder,this.$el.classList.remove("filled"))):(this.selectedId=e,this.$value.innerHTML=this.current.value,console.log(this.selectedId),"vibor-muzrum"==this.selectedId&&(this.$value.innerHTML=this.current.value+' <button class="hint">\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">\n  <path d="M6.99984 12.8333C3.77817 12.8333 1.1665 10.2216 1.1665 6.99999C1.1665 3.77833 3.77817 1.16666 6.99984 1.16666C10.2215 1.16666 12.8332 3.77833 12.8332 6.99999C12.8332 10.2216 10.2215 12.8333 6.99984 12.8333ZM6.4165 8.74999V9.91666H7.58317V8.74999H6.4165ZM7.58317 7.79046C8.4265 7.53946 9.0415 6.7582 9.0415 5.83332C9.0415 4.70574 8.12742 3.79166 6.99984 3.79166C6.00934 3.79166 5.18355 4.49702 4.99744 5.43284L6.14164 5.66169C6.22144 5.26062 6.57535 4.95832 6.99984 4.95832C7.48307 4.95832 7.87484 5.35007 7.87484 5.83332C7.87484 6.31656 7.48307 6.70832 6.99984 6.70832C6.67766 6.70832 6.4165 6.96948 6.4165 7.29166V8.16666H7.58317V7.79046Z" fill="black" fill-opacity="0.35"/>\n</svg>\n<p>\nСначала покажем лучшее по версии Музрум\n</p>\n\n</button>')),this.$el.querySelectorAll('[data-type="item"]').forEach(e=>{e.classList.remove("selected")}),this.options.multi?this.current.forEach(e=>{this.$el.querySelector(`[data-id='${e.id}']`).classList.add("selected")}):this.$el.querySelector(`[data-id='${this.current.id}']`).classList.add("selected"),this.options.multi||this.close(),this.options.onSelect&&this.options.onSelect(this.current,this.$el)}open(){this.$el.classList.add("open")}close(){this.$el.classList.remove("open")}toggle(){this.$el.classList.contains("open")?this.close():this.open()}getTemplate(e,t="<span></span>",l){const s=e.map(e=>{let s="";return(this.options.multi&&l.some(t=>t==e.id)||!this.options.multi&&e.id===l)&&(t=e.value,s="selected"),this.options.multi,`<li class="select__item ${s}" data-type="item" data-id="${e.id}">\n         \n         ${e.value}\n         </li>`});return`\n      <div class="select__header" data-type="header">\n      <div class="select__back" data-type="back"></div>\n      <div class="select__title" data-type="input">\n         <span>${t}</span>\n         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9334 6.08291C14.1498 6.29933 14.1498 6.6502 13.9334 6.86662L7.99991 12.8001L2.06643 6.86662C1.85002 6.6502 1.85002 6.29933 2.06643 6.08291C2.28285 5.8665 2.73748 5.86637 2.9539 6.08278L8.00027 11.0924L12.9972 6.08272C13.2136 5.86631 13.717 5.8665 13.9334 6.08291Z" fill="black"/>\n         </svg>\n         <button data-type="clear">\n           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n  <path d="M3 3L13 13M3 13L13 3" stroke="white"/>\n</svg>    \n         </button>      \n         \n    </div>\n      </div>\n      <div class="select__content">\n         <ul class="select__list">\n            ${s.join("")}\n         </ul>\n      </div>\n      `}}function tabs(e,t){const l=document.querySelectorAll(e),s=document.querySelectorAll(t);let o;l.length&&l.forEach(e=>{e.addEventListener("change",()=>{e.checked&&(o=e.value),s.forEach(e=>{e.classList.remove("active"),e.getAttribute("data-tab")==o&&e.classList.add("active")})})})}function accordion(e,t){const l=document.querySelectorAll(""+e),s=document.querySelectorAll(""+t);if(l.length>0)for(let e=0;e<l.length;e++){let t=l[e];t.addEventListener("click",()=>{for(let e=0;e<s.length;e++){if(s[e].classList.contains("collapsing"))return;slideHide(s[e])}for(let e=0;e<l.length;e++)l[e].classList.remove("active");let o=s[e];o.classList.contains("collapsing")||(o.classList.contains("collapse_show")?t.classList.remove("active"):t.classList.add("active"),slideShow(o))})}}function slideShow(e,t=500){if(e.classList.contains("collapsing")||e.classList.contains("collapse_show"))return;e.classList.remove("collapse");const l=e.offsetHeight;e.style.height=0,e.style.overflow="hidden",e.style.transition=`height ${t}ms ease`,e.classList.add("collapsing"),e.offsetHeight,e.style.height=l+"px",window.setTimeout(()=>{e.classList.remove("collapsing"),e.classList.add("collapse"),e.classList.add("collapse_show"),e.style.height="",e.style.transition="",e.style.overflow=""},t)}function slideHide(e,t=500){!e.classList.contains("collapsing")&&e.classList.contains("collapse_show")&&(e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.height=0,e.style.overflow="hidden",e.style.transition=`height ${t}ms ease`,e.classList.remove("collapse"),e.classList.remove("collapse_show"),e.classList.add("collapsing"),window.setTimeout(()=>{e.classList.remove("collapsing"),e.classList.add("collapse"),e.style.height="",e.style.transition="",e.style.overflow=""},t))}const popupLinks=document.querySelectorAll(".modal__link"),lockPadding=document.querySelectorAll(".lock-padding"),popupCloseIcon=document.querySelectorAll(".modal__close");let unlock=!0;const timeout=500;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const l=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(l)),e.preventDefault()}))}if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".modal")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".modal.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".modal__content")||popupClose(e.target.closest(".modal"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),500)}function bodyUnLock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),500),unlock=!1,setTimeout((function(){unlock=!0}),500)}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".modal.open"))}}));
//# sourceMappingURL=../sourcemaps/app.min.js.map
